/*! SpringRollCursor 0.2.0 */
!function(){"use strict";!function(){function a(a){if(!this.hasTouch){var c=this.options.cursorSettings;if(c){var d;d=c.atlasData&&c.atlasImage?{id:"cursorAtlas",atlas:c.atlasData,image:c.atlasImage}:{cursorNormal:c.normal,cursorPointer:c.pointer},a.push({id:"CursorAssets",assets:[d],complete:b.bind(this)})}}}function b(a){if(!this.hasTouch){this._stageOut=c.bind(this),this._stageIn=d.bind(this),this._onMouseMove=e.bind(this),this._onCursorChange=f.bind(this);var b=this.display.stage;b.addEventListener("mouseleave",this._stageOut),b.addEventListener("mouseenter",this._stageIn),b.addEventListener("stagemousemove",this._onMouseMove),b.addEventListener("changecursor",this._onCursorChange),this.display.canvas.style.cursor="none";var g,k,l=this.options.cursorSettings,m=new h,n=a.cursorAtlas||null;n?(g=i.bitmapFromTexture(n.getFrame(l.normal)),k=i.bitmapFromTexture(n.getFrame(l.pointer))):(g=new j(a.cursorNormal),k=new j(a.cursorPointer)),l.normalOrigin?(g.regX=l.normalOrigin.x,g.regY=l.normalOrigin.y):n?(g.regX=.5*g.nominalBounds.width,g.regY=.5*g.nominalBounds.height):(g.regX=.5*g.image.width,g.regY=.5*g.image.height),l.pointerOrigin?(k.regX=l.pointerOrigin.x,k.regY=l.pointerOrigin.y):n?(k.regX=.5*k.nominalBounds.width,k.regY=.5*k.nominalBounds.height):(k.regX=.5*k.image.width,k.regY=.5*k.image.height),m.addChild(g,k),k.visible=!1,this.cursor=m,this._cursorNormal=g,this._cursorPointer=k,b.addChild(m),this.once("afterInit",function(){this.display.stage.addChild(this.cursor)},-1)}}function c(a){this.cursor&&(this.cursor.visible=!1)}function d(a){this.cursor&&(this.cursor.visible=!0)}function e(a){this.cursor.x=a.stageX,this.cursor.y=a.stageY}function f(a){this._cursorPointer.visible="pointer"==a.cursor,this._cursorNormal.visible="pointer"!=a.cursor}var g=include("springroll.ApplicationPlugin"),h=(include("springroll.ListTask"),include("createjs.Container")),i=(include("springroll.easeljs.TextureAtlas"),include("springroll.easeljs.BitmapUtils")),j=include("createjs.Bitmap"),k=new g;k.setup=function(){this.options.add("cursorSettings",null,!0),this.options._options.displayOptions&&(this.options._options.displayOptions.keepMouseover=!0),this.cursor=null,this._cursorNormal=null,this._cursorPointer=null,this._stageOut=null,this._stageIn=null,this._onMouseMove=null,this._onCursorChange=null,this.hasTouch||this.once("loading",a.bind(this))},k.teardown=function(){var a=this.cursor;a&&(a.parent&&a.parent.removeChild(this.cursor),a.removeAllChildren()),this.cursor=this._cursorPointer=this._cursorDefault=null,this.unload("CursorAssets");var b=this.display.stage;b.removeEventListener("mouseleave",this._stageOut),b.removeEventListener("mouseenter",this._stageIn),b.removeEventListener("stagemousemove",this._onMouseMove),b.removeEventListener("changecursor",this._onCursorChange),this._stageOut=this._stageIn=this._onMouseMove=this._onCursorChange=null}}();}();