/*! CustomCursor 0.0.1 */
!function(){"use strict";!function(){function a(a){if(!this.hasTouch){var c=this.options.cursorSettings;if(c){var d;d=c.atlasData&&c.atlasImage?[{id:"atlasData",src:c.atlasData},{id:"atlasImage",src:c.atlasImage}]:[{id:"cursorNormal",src:c.normal},{id:"cursorPointer",src:c.pointer}],a.push(new i("",d,b.bind(this)))}}}function b(a){if(!this.hasTouch){this.stageOut=d.bind(this),this.stageIn=e.bind(this),this.onMouseMove=f.bind(this),this.onCursorChange=g.bind(this);var b=this.display.stage;b.addEventListener("mouseleave",this.stageOut),b.addEventListener("mouseenter",this.stageIn),b.addEventListener("stagemousemove",this.onMouseMove),b.addEventListener("changecursor",this.onCursorChange),this.display.canvas.style.cursor="none";var h=this.options.cursorSettings;if(this.cursor=new j,a.atlasData){var i=new k(a.atlasImage.content,a.atlasData.content);this.cursorDefault=l.bitmapFromTexture(i.getFrame(h.normal)),this.cursorPointer=l.bitmapFromTexture(i.getFrame(h.pointer)),this.cursorAtlas=i}else this.cursorDefault=new m(a.cursorNormal.content),this.cursorPointer=new m(a.cursorPointer.content);h.normalOrigin?(this.cursorDefault.regX=h.normalOrigin.x,this.cursorDefault.regY=h.normalOrigin.y):this.cursorAtlas?(this.cursorDefault.regX=.5*this.cursorDefault.nominalBounds.width,this.cursorDefault.regY=.5*this.cursorDefault.nominalBounds.height):(this.cursorDefault.regX=.5*this.cursorDefault.image.width,this.cursorDefault.regY=.5*this.cursorDefault.image.height),h.pointerOrigin?(this.cursorPointer.regX=h.pointerOrigin.x,this.cursorPointer.regY=h.pointerOrigin.y):this.cursorAtlas?(this.cursorPointer.regX=.5*this.cursorPointer.nominalBounds.width,this.cursorPointer.regY=.5*this.cursorPointer.nominalBounds.height):(this.cursorPointer.regX=.5*this.cursorPointer.image.width,this.cursorPointer.regY=.5*this.cursorPointer.image.height),this.cursor.addChild(this.cursorDefault),this.cursor.addChild(this.cursorPointer),this.cursorPointer.visible=!1,b.addChild(this.cursor),this.once("init",c.bind(this),-20)}}function c(){this.display.stage.addChild(this.cursor)}function d(a){this.cursor&&(this.cursor.visible=!1)}function e(a){this.cursor&&(this.cursor.visible=!0)}function f(a){this.cursor.x=a.stageX,this.cursor.y=a.stageY}function g(a){this.cursorPointer.visible="pointer"==a.cursor,this.cursorDefault.visible="pointer"!=a.cursor}var h=include("springroll.ApplicationPlugin"),i=include("springroll.ListTask"),j=include("createjs.Container"),k=include("springroll.easeljs.TextureAtlas"),l=include("springroll.easeljs.BitmapUtils"),m=include("createjs.Bitmap"),n=new h;n.setup=function(){this.options.add("cursorSettings",null,!0),this.options._options.displayOptions&&(this.options._options.displayOptions.keepMouseover=!0),this.hasTouch||this.once("loading",a.bind(this))},n.teardown=function(){this.cursorAtlas&&(this.cursorAtlas.destroy(),this.cursorAtlas=null),this.cursor&&(this.cursor.parent&&this.cursor.parent.removeChild(this.cursor),this.cursor.removeAllChildren(),this.cursor=this.cursorPointer=this.cursorNormal=null);var a=this.display.stage;a.removeEventListener("mouseleave",this.stageOut),a.removeEventListener("mouseenter",this.stageIn),a.removeEventListener("stagemousemove",this.onMouseMove),a.removeEventListener("changecursor",this.onCursorChange),this.stageOut=this.stageIn=this.onMouseMove=this.onCursorChange=null}}();}();